{
    "SRC": "/app001/www/redcap/external_modules",
    "DEST_DIR": "/app001/www/redcap/",
    "RFLAGS": "--exclude 'deploy.json' --delete -avzcO -e ssh",
    "EXCLUDES": [
        ".idea",
        ".git*"
    ],
    "DEFAULTS": {
        "run_tests": true,
        "run_predeploy": true,
        "run_postdeploy": true,
        "deploy_staging": false,
        "deploy_production": true,
        "create_tag": true
    },
    "SCRIPTS": [
        {
            "type": "pre_deploy",
            "environments": ["local"],
            "dir": "{{SRC}}",
            "cmds": [
                "if [ -n \"$(git status --porcelain)\" ]; then echo 'Uncommitted changes found!'; exit 1; fi",
                "git checkout production",
                "./run-tests.sh"
            ],
            "confirm": true
        },
        {
            "type": "post_deploy",
            "environments": ["local"],
            "dir": "{{SRC}}",
            "cmds": [
                "git checkout testing"
            ]
        }
    ]
}
